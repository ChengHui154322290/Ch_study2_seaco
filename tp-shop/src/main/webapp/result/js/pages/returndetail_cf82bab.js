function InitPage(e){switch(e.status){case"1":$(".div_splite").hide(),$(".div_return_desc_info").hide(),$("#id_logistics_info").hide(),$("#modify_return").hide(),$(".ui-footer").hide(),$("#tuihuo").hide(),OnClickCancalReturn(e);break;case"2":$("#id_opt_div").hide(),$(".div_tip_address").hide(),$("#div_return_info").removeClass("div_add_address"),$("#div_return_info").addClass("div_no_address"),$("#id_logistics_info").hide(),$(".ui-footer").hide(),$(".div_updata_photo_box").addClass("no_logistics_info"),$("#div_return_desc").text("驳回理由");break;case"3":$("#id_opt_div").hide(),CheckPass(e.asid),OnClickconfirm(e);break;case"4":$(".complete").hide(),$("#id_opt_div").show(),$("#cancal_return").hide(),$("#modify_return").css("margin-left","0px"),$("#id_logistics_info").hide(),OnClickModifyReturn(e);break;case"5":case"6":case"7":$(".complete").hide(),$("#id_logistics_info").removeClass("div_no_complete"),$("#id_logistics_info").addClass("div_with_complete"),$("#input_no").attr("disabled","disabled");break;case"8":$("#id_opt_div").hide(),$(".div_tip_address").hide(),$("#div_return_info").removeClass("div_add_address"),$("#div_return_info").addClass("div_no_address"),$("#id_logistics_info").hide(),$(".ui-footer").hide(),$(".div_updata_photo_box").addClass("no_logistics_info"),$("#div_return_desc").text("驳回理由"),parseInt(e.historycount)<3&&($("#id_opt_div").show(),$("#cancal_return").hide())}if(e.ascode&&$("#id_returnNo").text(e.ascode),e.applydate&&$("#id_time").text(e.applydate),e.statusdesc&&$("#id_returnresult").text(e.statusdesc),e.kfinfo&&$("#div_return_info").text(e.kfinfo),e.itemimg&&$("#id_item_img").attr("src",e.itemimg),e.itemname&&$(".ui_list_name").text(e.itemname),e.itemprice){var i=e.itemprice.split(".")[0]||"00",t=e.itemprice.split(".")[1]||"00";document.getElementById("id_line_price").innerHTML="¥<span>"+i+"</span>."+t}if(e.returncount&&$("#id_count").text("×"+e.returncount),e.returnprice){var n=e.returnprice.split(".")[0]||"00",r=e.returnprice.split(".")[1]||"00";$(".item_totle_price").html("¥<span>"+n+"</span>."+r),e.returncount&&$(".total_price_info").html("共"+e.returncount+'件 退款金额：<span class="price_fen">¥<span class="price_yuan">'+n+".</span>"+r+"</span>")}if(e.returnreasondesc&&$("#id_span_reson").text(e.returnreasondesc),e.returninfo&&e.returninfo.length>0?$("#id_span_explain").text(e.returninfo):$(".div_return_explain").hide(),e.returnimg&&e.returnimg.length>0)for(var o=0;o<e.returnimg.length&&5>o;o++){var s="upload_itme"+(o+1),a="id_img_photo"+(o+1);$("#"+s).show(),$("#"+a).attr("src",e.returnimg[o])}e.company&&$("#input_company").attr("value",e.company),e.logisticcode&&$("#input_no").attr("value",e.logisticcode),OnClickAddress(),OnTextChange()}function CheckPass(e){$("#id_logistics_company")[xigou.events.click](function(){window.location.href="selectcompany.html?asid="+e})}function OnClickCancalReturn(e){$("#cancal_return")[xigou.events.click](function(){params={token:xigou.getLocalStorage("token"),asid:e.asid},xigou.aftersales.cancal({requestBody:params,callback:function(e,i){if(i==xigou.dictionary.success){if(0!=e.code)return void $.tips({content:e.msg||"撤销售后申请失败",stayTime:2e3,type:"warn"});history.go(-1)}else $.tips({content:e.msg||"撤销售后申请失败",stayTime:2e3,type:"warn"})}})})}function OnClickModifyReturn(e){$("#modify_return")[xigou.events.click](function(){var i={};if(i.imgurl=e.itemimg,i.itemname=e.itemname,i.itemprice=e.itemprice,i.buycount=e.returncount,i.maxcount=e.buycount,e.returnreasondesc&&(i.reasonCodeDesc=e.returnreasondesc,i.reasonCode=e.returnreason),e.returninfo&&(i.returninfo=e.returninfo),e.returnimg&&e.returnimg.length>0){i.imgList={};for(var t=0;t<e.returnimg.length&&5>t;t++)i.imgList[t]=e.returnimg[t]}e.returninfo&&(i.returninfo=e.returninfo),e.linkname&&(i.linkname=e.linkname),e.linktel&&(i.linktel=e.linktel),e.ordercode&&(i.ordercode=e.ordercode),e.lineid&&(i.lineid=e.lineid),xigou.setLocalStorage("aftersalesparam",JSON.stringify(i)),window.location.href="customerservice.html"})}function OnClickconfirm(e){$(".confirm")[xigou.events.click](function(){if($(this).hasClass("confirm_enable")){var i={token:xigou.getToken(),asid:e.asid,logisticcode:$("#input_no")[0].value,company:e.company,companycode:e.companycode};xigou.aftersales.submitlogistic({requestBody:i,callback:function(e,i){i==xigou.dictionary.success&&e?0==e.code?history.go(-1):$.tips({content:e.msg||"提交物流单号失败",stayTime:2e3,type:"warn"}):$.tips(e?{content:e.msg||"提交物流单号失败",stayTime:2e3,type:"warn"}:{content:"提交物流单号失败",stayTime:2e3,type:"warn"})}})}})}function OnClickAddress(){$(".div_tip_address")[xigou.events.click](function(){var e=xigou.getQueryString("asid");window.location.href="returnaddress.html?asid="+e})}function OnTextChange(){var e=document.getElementById("input_company").value,i=document.getElementById("input_no").value;e&&i?$(".confirm").addClass("confirm_enable"):$(".confirm").removeClass("confirm_enable")}$(function(){for(var e=xigou.getQueryString("asid"),i=xigou.getLocalStorage("aftersaleslist"),t=JSON.parse(i),n=0;n<t.length;n++){var r=t[n];if(r.asid==e)return void InitPage(r)}});