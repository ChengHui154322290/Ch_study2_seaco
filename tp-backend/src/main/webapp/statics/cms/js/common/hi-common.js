function UIFramework(){	
	this.init();
};

var pageinit={};
var asoption={};

(function(){
	pageinit.advancedsearch=function(node){
		$(node).unbind().bind('click',function(){
			var tools_bar=$(this).parents('.tools_bar');
			if($(this).find('i').hasClass('ico_arr_down_as')){
				if(asoption[node].preopen()){
					$(this).find('.advanced-search').attr('class',"advanced-search-open pa");
					$(this).find('i').attr('class',"ico_arr_up_as");
					$("select,input",".screening").prop("disabled",false);	
					tools_bar.next(".screening").slideDown(300,function(){			
						pageinit.flexigridreset();
						asoption[node].opencall();
					});
				}
			}else{
				if(asoption[node].preclose()){
					$("select,input",".screening").prop("disabled",true);	
					tools_bar.next(".screening").slideUp(300,function(){
						tools_bar.find('.advanced-search-open').attr('class',"advanced-search pa");
						tools_bar.find('.advanced_search_box').find('i').attr('class',"ico_arr_down_as");
						pageinit.flexigridreset();
						asoption[node].closecall();
					});
				}
			}
		});
	};
	$.fn.assetting=function(option){
		var defaultoption={
			preopen:function(){return true;},
			preclose:function(){return true;},
			opencall:function(){},
			closecall:function(){}
		};
		asoption[$(this).selector]=$.extend(defaultoption,option);
		pageinit.advancedsearch($(this).selector);
	};

	pageinit.form_select=function(){
		if($(".form_select").size()){
			$(".form_select").each(function(i){
				$(this).wrapAll("<span class='form_select_box'></span>");
				
				var this_id=$(this).attr('id');
				var this_placeholder=$(this).attr('placeholder');

				if(!this_id){
					this_id = 'form_select_' + i;
					$(this).attr('id',this_id);
				}
				if(!this_placeholder){
					this_placeholder = '请选择';
				}
				if(!$('#' + this_id + ' option').size()){
					$("#" + this_id ).append($('<option>'));
				}


				$("#" + this_id ).eSelect(//{
					//placeholder: this_placeholder, //控件为指定值前的默认提示
					//allowClear: false,
				//}
				);

				
			});
		}
	};
	pageinit.flexigridreset=function(){
		if($('.flexigrid').size()){
			//erase by yangsl start 2014-08-03
			//$('.flexigrid').width($('.right').width());
			//erase by yangsl end 2014-08-03
			var resizeHeight=$('.left').height()-$('.flexigrid .bDiv').offset().top-45;
			$('.flexigrid .bDiv').height(resizeHeight);
		}
	};
	
}).call(this);

$(document).ready(function(e) {
	$('.advanced_search_box').assetting({
		preopen:function(){
			if($('#qryForm').length>0){ 
			    return ($('#qryForm').validationEngine('validate'));
			}else{
			    return true;
			}
		}
	});
	pageinit.form_select();
	if($(".unified-title").text() == ""){
    	$(".unified-title").text(document.title);
    }
	setTimeout(helpCenterInit, 200);
});

function helpCenterInit(){
	/*var url=ServerSet.helpUrl;
	if(!url||url==''||url=='null')url='http://192.168.100.137/';
	$.each($("a[a=help]"), function(){
		var obj=$(this);
		obj.css({cursor:'help'});
		var id=obj.attr('b'); if(!id||id=='')return;
		obj.attr('href', url+'support/detail/'+id);
	});	
	$.each($("i[a=help]"), function(){
		var obj=$(this);
		obj.css({cursor:'help'});
		var id=obj.attr('b'); if(!id||id=='')return;
		var index;
		obj.on('mouseover', function(){
			if(sessionStorage){
				var _c = sessionStorage.getItem("help_cache_"+id);
				if(_c&&_c!=''){
					index=layer.tips(_c, obj, {
						guide:0,time: -2,style: ['background-color:#5AA7E1; color:white', '#5AA7E1']
					});
					return;
				}
			}
			$.ajax({
				url: url+'api/support/'+id, dataType: "jsonp",
				success: function (data) {
					var _c=data.data.content;
					if(!_c||_c==null||_c=='null'||_c=='')return;
					index=layer.tips(_c, obj, {
						guide:0,time: 10,style: ['background-color:#5AA7E1; color:white', '#5AA7E1']
					});
					if(sessionStorage)sessionStorage.setItem("help_cache_"+id, _c);
				},
				error: function(XMLHttpRequest, textStatus, errorThrown){
					console.log(XMLHttpRequest);console.log(textStatus);console.log(errorThrown);
				}
			});
		});
		obj.on('mouseout', function(){
			layer.close(index);
		});
	});*/
	//$("i[a=help]").css({cursor:'help'});
}

UIFramework.prototype.init = function(){
	$(window).resize(function(){
		window.uiframework.resize();
		pageinit.flexigridreset();
		if($('.slide_box').size()){
			dashboardslide();
		}
	});
};

//窗口大小发生变化时重新调整布局尺寸
UIFramework.prototype.resize = function(){
	//var nWindowWidth = $(window).width();
	var nWindowHeight = $(window).height()+10; 
	$('.size_line').css('height', $('.left').height()); 
	$('.first-menu').height(nWindowHeight);
	$('.secondmenu_warp').height(nWindowHeight);
	$('#menu_wrap').height(nWindowHeight);
	//左侧菜单底部新浪微博等元素的自动定位
	//$('.lastwei_icon').css( 'margin-top', $('.first-menu').height() - $('.first-menu ul').height() - $('.lastwei_icon').height() - 40 );
};
 
$(window).load( function(){
	if( $('.left').length == 0 ) return; 
	window.uiframework = new UIFramework();
	try {
		window.uimenu = new UIMenu();
		window.uimenu.checkmenu();
	} catch(err) {
		//alert("菜单加载异常！");
	} finally{
		setTimeout(function(){window.uiframework.resize()}, 0);//强行脱离UI队列，保证resize执行效果
	}
});

(function($) {
	$.ajaxSetup({
		contentType : "application/x-www-form-urlencoded;charset=utf-8",
		complete : function(XMLHttpRequest, textStatus) {
			// 通过XMLHttpRequest取得响应头，sessionstatus
			var sessionstatus = XMLHttpRequest.getResponseHeader("sessionstatus");
			if (sessionstatus == "timeout"&&'0'==XMLHttpRequest.getResponseHeader('Content-Length')) {
				// 这里怎么处理在你，这里跳转的登录页面
				//top.location.replace(XMLHttpRequest.getResponseHeader("redirectUrl"));
				sessionTimeout(); // timeout: success -> complete (ajax方式不经过后台)
				return;
			}
			try{
				var n=$.parseJSON(XMLHttpRequest.responseText);
				if(n.exception_flag && n.exception_flag=='true'){
					if(n.message!=undefined && n.message!=''){
						$('body').Ynotify(n.message, 0,3000);
					}else{
						$('body').Ynotify("请求发生错误,请联系管理员！", 0,3000);						
					}		
				}
			}catch(e){
				
			}			
			return ;
		},
		error:function(xhr, status, e){			
			//alert("请求发生错误,请联系管理员！");						
		}
	});
	
	$.getAjaxData = function(url) {
		var jsonList = {};
		$.ajax({
			type : "post",
			url : url,
			async : false,
			data : arguments[1] || {},
			success : function(result, textStatus, jqXHR) {
				if('timeout'==jqXHR.getResponseHeader('sessionstatus')&&'0'==jqXHR.getResponseHeader('Content-Length')
						){
					return;
				}
				jsonList = eval("(" + result + ")");
			}
		});
		return jsonList;
	};
	function sessionTimeout(){
		document.title='对不起，登录超时，请重新登录！';
		$('body').Ynotify("对不起，登录超时，请重新登录！", 0, 5000);
		// TODO 阻断式登陆框 建设中。。。
	}
	$.submitAjaxData = function(url, data) {
		var jsonList = {};
		$.ajax({
			type : "post",
			url : url,
			async : false,
			data : data,
			success : function(result) {
				jsonList = eval("(" + result + ")");
			}
		});
		return jsonList;
	};

	$.getAjaxHtmlData = function(url) {
		var htmlData =null;
		$.ajax({
			type : "post",
			url : url,
			async : false,
			data : arguments[1] || {},
			success : function(result) {
				htmlData = result;
			}
		});
		return htmlData;
	};
	
	$.fn.serializeJson = function(){
		var serializeObj = {};
		var array= this.serializeArray();
		$(array).each(function(){
			if(serializeObj[this.name]){
				if($.isArray(serializeObj[this.name])){
					serializeObj[this.name].push(this.value);
				}else{
					serializeObj[this.name]=[serializeObj[this.name],this.value];
				}
			}else{
				serializeObj[this.name]=this.value;
			}
		});
		return serializeObj;
	};
	
	$.fn.selectInit = function(options) {
		var that = this;
		$(this).empty();
		if (options.defaults) {
			$(this).append(
					"<option value='" + options.defaults.key + "'>" + options.defaults.value
							+ "</option>");
		}

		var key = "dictcode", value = "dictvalue";
		if (options.mapping) {
			key = options.mapping.key;
			value = options.mapping.value;
		}

		$(options.data).each(function(num, item) {
			var $d1 = $("<option value='" + item[key] + "'>" + item[value] + "</option>");
		    $d1.data("optionData", item);
		    $(that).append($d1);
		});
		$(this).bind("change", options.onChange);
		return this;
	};

	$.fn.selectReadOnly = function(value) {
		$(this).val(value);
		$("option",this).each(function(i,item) {
			if($(item).val() != value){
				$(item).remove();
			}  
		});
	};

	$.dataDecode = function() {
		var param = arguments[0];
		for (var i = 1; i < arguments.length;) {
			if (param == arguments[i]) {
				return arguments[i + 1];
			}
			i = i + 2;
		}
		return arguments[arguments.length - 1];
	};	
	$.fn.jobType= function(data) {
		return $.clearData(data,0,10);
	};
	$.fn.jobReversalType= function(data) {
		return $.clearData(data,50,56);
	};
	$.clearData = function(data ,star ,end) {
		 var r=[];
		 $.each(data,function(i){
	        var num =Number(data[i].dictcode.substr(5,6));
	        if(num!='NaN'&&(num>star&&num<end)){ 
	        	r.push(data[i]);
	        }
		 });
		return r;
	};
	
	Array.prototype.remove=function(dx)
	  {
	    if(isNaN(dx)||dx>this.length){return false;}
	    for(var i=0,n=0;i<this.length;i++)
	    {
	        if(this[i]!=this[dx])
	        {
	            this[n++]=this[i];
	        }
	    }
	    this.length-=1;
	  };
	$.fn.addRequiredStyle = function(){
		$(this).each(function(){
			$('<span class="red-snow">*</span>').insertBefore($(this));
		});
	};
	$.reloadWindow = function(url){
	    window.location.href =$.addMenuParameter(url);
	};
	$.reloadWindowNotMenu = function(url){
	    window.location.href =url;
	};
	$.addMenuParameter =function (url){
		if($.getUrlParam('module',url) != null || $.getUrlParam('menu',url) != null){
			return url;
		}
		var search = window.location.search;
		var module = $.getUrlParam('module',search);
		var menu = $.getUrlParam('menu',search);
		if( menu > 0 && module > 0 ){
			var pap ="module="+module+"&menu="+menu;
			url = url + (url.indexOf("?")>0 ? "&" +pap: "?"+pap);
		}
		url = url.replace("\#","");
		return url;
	};
	$.newTabWindow = function(url){
	    var linking = $("<a href='" + $.addMenuParameter(url) + "' target='_blank'>Hiaas</a>").get(0); 
	    if ($.browser.msie) {
    	    // For IE 
	    	linking.click(); 
    	} else if ($.browser.mozilla) {
    		var ev = document.createEvent('MouseEvents'); 
      	    ev.initEvent('click', true, true);
      	    linking.dispatchEvent(ev);
    	} else{
    	    //FOR CHROM
    	    var ev = document.createEvent('HTMLEvents'); 
      	    ev.initEvent('click', true, true);
      	    linking.dispatchEvent(ev);
    	}
	};
	$.newWindow = function(url){
	    return window.open(url);
	};
	$.parasSplit = function(form){ //参数分割
			var rlt = "",i = 0,strs=$(form!=null?form:"#qryForm").serialize().split("&");
			for( ; i<strs.length; i++ ){
				var str = strs[i];
				rlt += str.substr(str.indexOf("=")+1)+"/";
			}
	   return rlt;
   };
	$.getUrlParam = function(name, url){
		if(null == url) return null ;
		url = ((url.indexOf("?")>=0) ? url.substr(url.indexOf("?")+1,url.length):url);
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = url.match(reg);  //匹配目标参数
        if (r != null) return unescape(r[2]); return null; //返回参数值
    };
	$.checkSessionExist = function(checkUrl){
		var url = ServerSet.contextPath + "/register/checksession?url="+checkUrl;
		var retData = $.getAjaxData(url);
		return retData;
	};
	$.popUpLogin = function(callBackUrl){
		var url = ServerSet.contextPath + "/user/loginPop?callBackUrl="+encodeURIComponent(callBackUrl);
		$.layer({
	         shade: [0.5, '#000', true],
	         type: 2,
	         iframe: {src: url},
	         title: ['', false],
	         closeBtn: [1, true],
	         offset:["50%","50%"],
			 area : ['405px','350px']
	    });
	};
	tableHeightCount = function (){
		   //modify by yangsl start 2014-08-03
		   /*
			var advanced = 0;  
		   if($("ul.screening:hidden").length == 0){
		       advanced = getOuterHeight($("ul.screening"));
		   } 
		   var tootalHeigth  = (getOuterHeight($("body")) -getOuterHeight($("ul.screening")) - getOuterHeight($("div.forehead"))
				   			   - getOuterHeight($("div.tips")) - getOuterHeight($("div.tools_bar")) - advanced -4);
		   */
			
		   var tootalHeigth= getOuterHeight($("body")) - $('.flexigrid .bDiv:visible').offset().top - 45;
		   //modify by yangsl end 2014-08-03
		   $("div.flexigrid div.bDiv").height(tootalHeigth);
		   if($("div.flexigrid").length>0){
			   $("div.no_record").hide();
		   }
	};
	getOuterHeight = function (tag){
	    return (tag.length>0)? tag.outerHeight():0;
    };
})(jQuery);

//小矩阵的公共方法，想用的随便
(function(){
	
    validResponse = function(response){//响应校验
        if ((response != null ? response.succ : void 0) === 0) {
            return false;
        }
        return true;
    };
    
    validAuth = function(response){//权限校验
        if ((response != null ? response.succ : void 0) === 0 && response.code == 402) {
            return true;
        }
        return false;
    };
	
	 //常规Ajax
    window.ajaxForJson = function(controller,action,params,callback,cbparams){
        $.ajax({
            type : 'POST',
            url : ServerSet.contextPath + '/'+ controller +'/'+ action,
            contentType : 'text/plain;charset=utf-8',
            data: {params:$.toJSON(params)},
            dataType : 'text',
            success: function(redata) {
                return callback(redata,cbparams);
            }
        });
    };

    //跨域Ajax
    window.ajaxForJsonp = function(controller,action,params,callback,cbparams,async){
        $.ajax({
            url: ServerSet.contextPath + '/'+ controller + '/' + action,
            data: $.toJSON({params:params}),
            crossDomain: true,
            dataType: "jsonp",
            async: async == undefined?true:async,
            jsonp: "jsonpCallback",
            success: function(redata) {
                return callback(redata,cbparams);
            }
        });
    };
}).call(this);

//add wumenghua 默认值
(function($) {
	$.fn.Constants = {
	 outstore             :'HWMSN01', //出库
	 outstorereverse      :'HWMSN51',//出库冲销
	 instore              :'HWMSN02', //入库
	 instorereverse       :'HWMSN52',//入库冲销
	 allout               :'HWMSN03', //调拨
	 alloutreverse        :'HWMSN53',//调拨冲销
	 transfer			  :'HWMSN04', //过户
	 transferreverse      :'HWMSN54',//过户冲销
	 cargoChange		  :'HWMSN05', //库位变更
	 cargoChangeReverse   :'HWMSN55',//货位变更冲销
	 tradingChange		  :'HWMSN12', //商权变更
	 tradingChangeReverse :'HWMSN56', //商权变更冲销
	 storeJobAppoint	  :'HWMAN01', //预约
	 storeJobPlan		  :'HWMAN02', //计划
	 storeJobWork		  :'HWMAN03',  //作业
	 allotouttype         :'HWMSN14',  //调出
	 allotinttype         :'HWMSN15',  //调入
	 storeJobFinish       :'HWMSS01',  //作业完成
	 UserFilterIsYes      :'USFIL01',  //根据用户过滤
	 UserFilterIsNo       :'USFIL02',  //不根据用户过滤
	 stockRangeAll        :'HWMIR03',  //全盘
	 stockRangePart       :'HWMIR04',  //抽盘
	 stockBook            :'HWMIT03',  //台账盘点
	 stockResource        :'HWMIT04',  //实物盘点
	 stockBlockIsYes      :'HWMIS05',  //作业冻结方式  
	 stockBlockIsNo       :'HWMIS05',  //作业非冻结方式
	 stockAllResource     :'HWMIR09',  //盘点所有物资
	 stockPartResource    :'HWMIR10',  //盘点指定物资
	 stockUserTypeAll     :'HWMIU01',  //所有客户
	 stockUserTypeOnly    :'HWMIU02',  //指定客户
	 stockStatusNo        :'HWMIS01',  //未启动
	 stockStatusStart     :'HWMIS02',  //已启动
	 stockStatusOver      :'HWMIS03',  //已完成
	 stockStatusCancel    :'HWMIS04',  //作废
	 jobStatusFinish    		:'HWMSS01',  //作业状态-完成
	 jobStatusCancel          : "HWMSS02", //作业状态-作废
	 jobStatusHandOver	:'HWMSS03',  //作业状态-手动完结
	 jobStatusRefuse	:'HWMSS19',  //作业状态-已拒绝

	 statusDoing             :"2",//检验中

	/**
	 * 作业来源   
	 */
	 jobSourceStoreIn		  : "HWMSS14",//作业来源仓储录入
	 jobSourceTypeLadings : "HWMSR03",//提单生成
	 jobSourceTypeSell		  : "HWMSS17",//来源交易流程发起
	 
	 //全局是否
	 allStatusYes             :"HDDDA03",//是
	 allStatusNo              :"HDDDA04",//否

	// 有无审核权限
	STORES_IS_AUDIT_HWMSI01 : "HWMSI01" ,// 是
	STORES_IS_AUDIT_HWMSI02 : "HWMSI02" ,// 否
		
	 //计量单位
     weightUom            :'HDDUT05',  //重量单位++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
     volumeUom            :'HDDUT03',  //体积单位
     quantityUom          :'HDDUT06', //数量单位
     areaUom              :'HDDUT02',//面积单位
     authorityTypeBusiness :"HWMRT01", //商权
     authorityTypeResource :"HWMRT02",//货权 
     
      //执行标准状态(审核状态)
     SRD_STATUS            :"SRD_STATUS",  //执行标准状态
     SRD_STATUS_WAIT       :"HPBSS01",     //执行标准状态 待审核
     SRD_STATUS_PASS       :"HPBSS02",     //执行标准状态 审核通过
     SRD_STATUS_NO_PASS    :"HPBSS03" ,     //执行标准状态 审核不通过
     
     unOutJob 		  		:'HWMSN51', //出库冲销作业
     unInJob   		  		:'HWMSN52', //入库冲销作业
     unAlloutJob    		:'HWMSN53', //调拨冲销作业
     unTransferJob		:'HWMSN54', //过户冲销作业
     unCargoJob			:'HWMSN55',//库位变更冲销作业
     unTradingJob		:'HWMSN56' //商权变更冲销作业
  };
	
})(jQuery);

String.prototype.endWith = function(str){
	if(str==null||str==""||this.length==0||str.length>this.length)
	  return false; 
	return (this.substring(this.length-str.length)==str);
};

String.prototype.startWith=function(str){
	if(str==null||str==""||this.length==0||str.length>this.length)
	  return false;
	return (this.substr(0,str.length)==str);
};

String.prototype.lengthByte = function() {
	return this.replace(/[^\x00-\xff]/g, "xx").length;  
};

Number.prototype.div = function (arg){
	var arg1 = this ,arg2 = arg;
	var t1=0,t2=0,r1,r2;
	try{
		t1=arg1.toString().split(".")[1].length;
	}catch(e){
		
	}
	try{
		t2=arg2.toString().split(".")[1].length;
	}catch(e){
		
	}
	with(Math){
		r1=Number(arg1.toString().replace(".",""));
		r2=Number(arg2.toString().replace(".",""));
		return (r1/r2)*pow(10,t2-t1);
	} 
};

Number.prototype.mul = function (arg){
	var arg1 = this,arg2 = arg;
	var m=0,s1=arg1.toString(),s2=arg2.toString();
	try{
		m+=s1.split(".")[1].length;
	}catch(e){
		
	}
	try{
		m+=s2.split(".")[1].length;
	}catch(e){
		
	}
	return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);
};


Number.prototype.add = function (arg){
	var accAdd = function (arg1,arg2){
	    var r1,r2,m;
	    try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}
	    try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}
	    m=Math.pow(10,Math.max(r1,r2));
	    //modify by yuzhizhong 2014.07.29
	    //动态控制精度长度
	    n=(r1>=r2)?r1:r2;
	    return ((arg1*m+arg2*m)/m).toFixed(n);
	};
    return accAdd(arg,this);
}

Number.prototype.sub = function (arg){
	var  accSub = function (arg1,arg2){
       var r1,r2,m,n;
       try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}
       try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}
       m=Math.pow(10,Math.max(r1,r2));
       //last modify by deeka
       //动态控制精度长度
       n=(r1>=r2)?r1:r2;
       return ((arg1*m-arg2*m)/m).toFixed(n);
	}
    return accSub(arg,this);
}

String.prototype.formatMoney =  function(n) {
	var s = this ;
    n = n||0;
	n = n > 0 && n <= 20 ? n : 2;
	s = s + "";
	//采取截取而不是四舍五入算法
	if(s.indexOf(".") > -1){
		s = s.substring(0, s.indexOf(".")+1)+s.substring(s.indexOf(".")+1).substring(0, n);
	}
	s = parseFloat((s + "").replace(/[^\d\.-]/g, "")).toFixed(n) + "";
	var l = s.split(".")[0].split("").reverse(), r = s.split(".")[1];
	t = "";
	for (i = 0; i < l.length; i++) {
	t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? "," : "");
	}
	return t.split("").reverse().join("") + "." + r;
} 

String.prototype.formatBackMoney =  function() {
	var s = this ;
	return parseFloat(s.replace(/[^\d\.-]/g, "")); 
};

//保留两位小数    
//功能：将浮点数四舍五入，取小数点后2位  
toDecimal = function toDecimal(src,pos){      
    return Math.round(src*Math.pow(10, pos))/Math.pow(10, pos);             
};
//对象和数组的深拷贝 
Object.clone = function(sObj){ 
	if(typeof sObj !== "object"){
		return sObj;
	} 
    var s = {}; 
    if(sObj.constructor == Array){ 
    	s = []; 
    } 
    for(var i in sObj){
    	s[i] = Object.clone(sObj[i]); 
    } 
    return s;
};
