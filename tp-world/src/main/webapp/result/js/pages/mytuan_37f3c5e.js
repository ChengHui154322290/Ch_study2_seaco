function GetUserTuanInfo(){var i={token:xigou.getToken()};xigou.groupbuy.my({requestBody:i,callback:function(i,s){s==xigou.dictionary.success?0==i.code?(InitLaunchPage(i.data.launch),InitJoinPage(i.data.join)):$.tips({content:i.msg||"获取数据失败,请检测网络连接!",stayTime:2e3,type:"warn"}):$.tips(i?{content:i.msg||"获取数据失败,请检测网络连接!",stayTime:2e3,type:"warn"}:{content:"获取数据失败,请检测网络连接!",stayTime:2e3,type:"warn"})}})}function InitLaunchPage(i){if(i&&0!=i.length){for(var s=[],a=0;a<i.length;a++){if(s.push('<div class="tuan_item" gbid="'+i[a].gbid+'" gid="'+i[a].gid+'">'),s.push(' <div class="item_img">'),i[a].pic&&s.push('<img src="'+i[a].pic+'">'),s.push(" </div>"),s.push(' <div class="item_info">'),s.push('     <div class="div_name">'+i[a].name+"</div>"),s.push('     <div class="div_info1">'),i[a].gprice){var t=i[a].gprice.split(".")[0]||" ",e=i[a].gprice.split(".")[1]||" ";s.push('         <div class="item_price">¥'+t+".<span>"+e+"</span></div>")}switch(i[a].status){case"1":s.push('<div class="tuan_status_desc">进行中</div>');break;case"2":s.push('<div class="tuan_status_desc">参团成功</div>');break;default:s.push('<div class="tuan_status_desc">参团失败</div>')}s.push("     </div>"),s.push('     <div class="div_info2">'),i[a].sprice&&s.push('         <div class="div_old_price">¥'+i[a].sprice+"</div>");var n=parseInt(100*i[a].fa/i[a].pa);s.push('         <div class="div_progress"><div style="width: '+n+'%"></div></div>'),s.push('         <span class="tuan_peson_coun">'+i[a].fa+"/"+i[a].pa+"</span>"),s.push("     </div>"),s.push(" </div>"),s.push("</div>")}$(".tuan_launch").append(s.join(" ")),$(".tuan_launch .tuan_item")[xigou.events.click](function(){var i=$(this).attr("gbid"),s=$(this).attr("gid");xigou.removeSessionStorage("tuan_gid");xigou.setSessionStorage("tundetails_backurl",0);window.location.href="tuan.html?gbid="+i+"&gid="+s})}else $(".tuan_launch").empty().addClass("div_item_none")}function InitJoinPage(i){if(i&&0!=i.length){for(var s=[],a=0;a<i.length;a++){if(s.push('<div class="tuan_item" gbid="'+i[a].gbid+'" gid="'+i[a].gid+'">'),s.push(' <div class="item_img">'),i[a].pic&&s.push('<img src="'+i[a].pic+'">'),s.push(" </div>"),s.push(' <div class="item_info">'),s.push('     <div class="div_launch_people">'+i[a].memberName+"发起了此团</div>"),s.push('     <div class="div_name">'+i[a].name+"</div>"),s.push('     <div class="div_info1">'),i[a].gprice){var t=i[a].gprice.split(".")[0]||" ",e=i[a].gprice.split(".")[1]||" ";s.push('         <div class="item_price">¥'+t+".<span>"+e+"</span></div>")}switch(i[a].status){case"1":s.push('<div class="tuan_status_desc">进行中</div>');break;case"2":s.push('<div class="tuan_status_desc">参团成功</div>');break;default:s.push('<div class="tuan_status_desc">参团失败</div>')}s.push("     </div>"),s.push('     <div class="div_info2">'),i[a].sprice&&s.push('         <div class="div_old_price">¥'+i[a].sprice+"</div>");var n=parseInt(100*i[a].fa/i[a].pa);s.push('         <div class="div_progress"><div style="width: '+n+'%"></div></div>'),s.push('         <span class="tuan_peson_coun">'+i[a].fa+"/"+i[a].pa+"</span>"),s.push("     </div>"),s.push(" </div>"),s.push("</div>")}$(".tuan_join").append(s.join(" ")),$(".tuan_join .tuan_item")[xigou.events.click](function(){{var i=$(this).attr("gbid"),s=$(this).attr("gid");xigou.setSessionStorage("tundetails_backurl",1)}xigou.removeSessionStorage("tuan_gid"),window.location.href="tuan.html?gbid="+i+"&gid="+s})}else $(".tuan_join").empty().addClass("div_item_none")}function setdefaulesel(i){var s=$(".ui-tab-content")[0],a=$(".ui-tab-nav")[0];$(s.children[0]).removeClass("current"),$(a.children[0]).removeClass("current"),$(s.children[i]).addClass("current"),$(a.children[i]).addClass("current");var t=-1*s.clientWidth*i/2;s.style.transform="translate("+t+"px, 0px)",$(s.children)[0].height="0px"}$(function(){xigou.getLoginUserInfo({callback:function(i,s){if(s!=xigou.dictionary.success)xigou.setSessionStorage("loginjump_url","mytuan.html"),window.location.href="logon.html";else{GetUserTuanInfo();var a=parseInt(xigou.getSessionStorage("tundetails_backurl"));1==a&&setdefaulesel(1)}}}),isWeiXin()&&($(".ui-header").hide(),$(".ui-tab-nav").css({top:"10px"}),$(".ui-tab").css({"margin-top":"0"}),$("title").html("我的团购"))});