function bindTheCode(){$(".register-btn")[xigou.events.click](function(){})}function setCodeTime(e){var t=$(".h5");t.text(e+"s重发").addClass("disable");var i=setInterval(function(){return 0>=e?(clearInterval(i),t.text("获取验证码").removeClass("disable"),void bindTheCode()):void t.text(--e+"s重发")},1e3)}function bindTel(){$(".register-register")[xigou.events.click](function(){var e={token:xigou.getToken(),tel:$("#input-telnum").val(),captcha:$("#checkCode").val(),uniontype:"1"},t={requestBody:e,callback:function(e,t){if(t==xigou.dictionary.success)if(null==e)$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"});else{var i=e.code;switch(i){case"0":if(e.data.promoterinfo&&"{}"!=e.data.promoterinfo){var n=JSON.parse(e.data.promoterinfo);n.token=e.data.token,xigou.setLocalStorage("dssUser",n,!0)}var o={token:e.data.token,telephone:e.data.tel,name:e.data.name};xigou.removeSessionStorage("realname"),xigou.removeSessionStorage("realnum"),xigou.setSessionStorage("userinfo",o,!0),xigou.setLocalStorage("show_name",e.data.tel||e.data.name),xigou.setLocalStorage("token",e.data.token),$.tips({content:e.msg||"绑定成功",stayTime:2e3,type:"warn"}),setTimeout(function(){var e=xigou.getSessionStorage("loginjump_url")||"index.html";xigou.setSessionStorage("loginjump_url",""),window.location.href=e},2e3);break;default:$.tips({content:e.msg||"获取验证码失败",stayTime:2e3,type:"warn"})}}else $.tips({content:"请求失败，详见"+e,stayTime:2e3,type:"warn"})}};xigou.activeUser.bindunion(t)})}function getCode(){$(".wx,#achieve")[xigou.events.click](function(){var e={tel:$("#input-telnum").val(),randid:$("#randid").val(),type:"6"},t={requestBody:e,callback:function(e,t){t==xigou.dictionary.success?null==e?$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"}):"0"==e.code?($("#hide-div").show(),$(".h5").hide(),$(".wx").css({color:"#ccc","border-color":"#ccc"}),$.tips({content:e.msg,stayTime:2e3,type:"warn"})):$.tips({content:e.msg||"获取验证码失败",stayTime:2e3,type:"warn"}):xigou.alert("请求失败，详见"+e)}};xigou.activeUser.getCaptcha(t)})}$(function(){isWeiXin()?getCode():initgeetest(),bindTel(),bindTheCode(),isWeiXin()&&($(".ui-header").hide(),$(".input_info_list").css({"margin-top":"0"}),$("title").html("绑定手机号码"),$(".hide").hide(),$(".btn_pre").show(),$(".input-telnum").bind("focus",function(){$(".get_code").css({color:"#333","border-color":"#333"})}),$("#checkCode").bind("focus",function(){$(".btn_pre").css({background:"#333"})}),$("#hide-div").show(),$(".get_code").show())}),$("#hide-div").hide();var handlerEmbed=function(e){$(".h5,#achieve")[xigou.events.click](function(){var t=e.getValidate();if(t){var i={geetest_challenge:$("[name=geetest_challenge]").val(),geetest_validate:$("[name=geetest_validate]").val(),geetest_seccode:$("[name=geetest_seccode]").val(),tel:$("#input-telnum").val(),randid:$("#randid").val(),type:"6"},n={requestBody:i,callback:function(e,t){t==xigou.dictionary.success?null==e?$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"}):"0"==e.code?($("#hide-div").show(),$(".register-btn").hide(),$.tips({content:e.msg,stayTime:2e3,type:"warn"})):$.tips({content:e.msg||"获取验证码失败",stayTime:2e3,type:"warn"}):xigou.alert("请求失败，详见"+e)}};xigou.activeUser.sendGeeCode(n)}else $.tips({content:"请先完成验证",stayTime:2e3,type:"warn"})}),e.appendTo("#embed-captcha"),e.onReady(function(){})};