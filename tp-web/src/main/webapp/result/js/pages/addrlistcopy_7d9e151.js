function getProvince(){var e={callback:function(e,i){if(i==xigou.dictionary.success){var t=e||null;(null==t||0==t.length)&&(window.location.href=backUlr);var o=t.code,r="";if(0==o){var a=t.data||null;(null==a||0==a.length)&&(window.location.href=backUlr);for(var l=0;l<a.length;l++){var s=a[l].region;r+="<div>",r+="<a>"+s+"</a>";var c=a[l].info||null;(null==c||0==c.length)&&(window.location.href=backUlr),r+='<ul class="ui-list ui-list-text ui-list-link ui-border-tb addrlist-ul">';for(var n=0;n<c.length;n++)r+='<li class="ui-border-t chooseNext province" name="'+c[n].provcode+'" pro="'+a[l].regcode+'" area="'+s+'"><span class="floor_city">'+c[n].province+"</span></li>";r+="</ul>",r+="</div>"}$("#area").html(r),getcity()}else window.location.href=backUlr}}};xigou.activeArea.getProvinces(e)}function getList(e){var i={p:"id="+e,callback:function(e,i){if(i==xigou.dictionary.success){var t=e||null;(null==t||0==t.length)&&(window.location.href=backUlr);var o=t.code,r="";if(0==o){var a=t.data||null;(null==a||0==a.length)&&(window.location.href=backUlr),r+='<ul class="ui-list ui-list-text ui-list-link ui-border-tb addrlist-ul">';for(var l=0;l<a.length;l++)r+='<li class="ui-border-t chooseNext" name="'+a[l].code+'"><span class="floor_city">'+a[l].name+'</span><span class="choose_next"></span></li>';r+="</ul>",$("#area").html(r),getcity()}else window.location.href=backUlr}}};xigou.activeArea.getCity(i)}function getcity(){$(".chooseNext")[xigou.events.click](function(){floor++;var e=$(this).attr("name"),i=$(this).find("span").eq(0).text();if(floor_code[floor]=e,null!=e||""!=e){switch(floor){case 1:my_address.provinceid=e,my_address.province=i;break;case 2:my_address.cityid=e,my_address.city=i;break;case 3:my_address.districtid=e,my_address.district=i;break;case 4:my_address.streetid=e,my_address.street=i}if(xigou.setLocalStorage("my_address",my_address,!0),$(this).hasClass("province")){var t=JSON.parse(xigou.getLocalStorage("address"));if(t.area.code=$(this).attr("pro"),t.area.name=$(this).attr("area"),t.city.code=e,t.city.name=i,"index.html"==backUlr)return window.location.href=backUlr,!1}getList(e)}})}function chooseArea(){var e=new Array;e.push('<div class="empty_box_des">'),e.push("	<h2></h2>"),e.push("	<p>您的位置地上海</p>"),e.push("</div>"),e.push('<div style="width:100%; padding:15px 0 10px; float:left">'),e.push('<div style="width:50%; padding:15px 0 10px; float:left">'),e.push('	<a id="modify" style="display:block;width:90%; margin:0 auto; height:45px; line-height:45px; text-align:center; color:#fff; font-size:1.6rem; background-color:#19b4ad; border-radius:5px;">更改</a>'),e.push("</div>"),e.push('<div style="width:50%; padding:15px 0 10px; float:left">'),e.push('	<a id="into" style="display:block;width:90%; margin:0 auto;height:45px; line-height:45px; text-align:center; color:#fff; font-size:1.6rem; background-color:#c8597a; border-radius:5px;">进入</a>'),e.push("</div>");$.dialog({title:"",content:e.join(""),button:["确认"]});$("#modify")[xigou.events.click](function(e){$(".ui-dialog").remove(),$(".ui-mask").remove(),$(window).off("ortchange",e.preventDefault()),$(document).off("touchmove",e.preventDefault())}),$("#into")[xigou.events.click](function(){window.location.href=backUlr})}var floor=0,floor_code=["","","",""],old_adr=JSON.parse(xigou.getLocalStorage("address")),my_address={provinceid:"",province:"",cityid:"",city:"",districtid:"",district:"",streetid:"",street:""},flag=xigou.getQueryString("showChooseArea"),backUlr=xigou.getQueryString("backurl")||"index.html",selectUrl=xigou.getQueryString("selecturl")||"";if("select_shippingaddress.html"==selectUrl&&(backUlr=backUlr+"?selecturl="+selectUrl),"lottery.html"==backUlr){var form=xigou.getQueryString("form");form&&(backUlr=backUlr+"?form="+form)}$(function(){getProvince(),$("#back")[xigou.events.click](function(){switch(floor){case 0:xigou.setLocalStorage("address",old_adr,!0),xigou.setLocalStorage("my_address",{},!0),window.location.href=backUlr;break;case 1:floor--,getProvince();break;case 2:case 3:floor--,getList(floor_code[floor]);break;default:window.location.href=backUlr}})});