function initManager(){$(".managermobile").text(xigou.getLocalStorage("show_name"))}function initUserInfoList(){var e={token:xigou.getToken()};xigou.redeemManager.userlist({requestBody:e,callback:function(e,t){if(t==xigou.dictionary.success)if(null==e)$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"});else switch(e.code){case"0":initHtml(e.data);break;default:$.tips({content:e.msg||"获取员工列表失败",stayTime:2e3,type:"warn"})}else $(".add").hide(),$.tips({content:"请求失败，详见"+e,stayTime:2e3,type:"warn"})}})}function initHtml(e){length=e.length,html=[];for(var t=0;length>t;t++)html.push('<li class="child_num">'),html.push('<span class="list"></span>'),html.push(e[t].mobile),html.push('<span class="delete deleteuser" userid="'+e[t].fastUserId+'"><img src="img/store/delete.png"></span>'),html.push("</li>");0==html.length?($(".nothing").show(),$(".all_child").hide()):($(".nothing").hide(),$(".all_child").show(),$(".userinfolist").empty(),$(".userinfolist").append(html.join(""))),deleteuser()}function deleteuser(){$(".deleteuser")[xigou.events.click](function(e){e.stopPropagation();var t=$(this).attr("userid"),i={token:xigou.getToken(),userid:t};setTimeout(function(){var e=$.dialog({title:"",content:"您确认删除员工信息？",button:["取消","确认"]});e.on("dialog:action",function(e){1==e.index&&xigou.redeemManager.userdelete({requestBody:i,callback:function(e,t){if(t==xigou.dictionary.success)if(null==e)$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"});else switch(e.code){case"0":$.tips({content:"删除员工成功",stayTime:2e3,type:"warn"}),initUserInfoList();break;default:$.dialog({title:"",content:e.msg||"删除失败",button:["确认"]})}else $.tips({content:"请求失败，详见"+e,stayTime:2e3,type:"warn"})}})})})})}$(function(){xigou.getLoginUserInfo({callback:function(e,t){t==xigou.dictionary.success?(initManager(),initUserInfoList()):window.location.href="index.html"}}),isWeiXin()||($("header").show(),$(".manager_info").addClass("manager_wx"))});