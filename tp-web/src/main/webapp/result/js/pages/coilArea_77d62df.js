function receiveCenterlist(i,s,e){if("Y"==getWithdrawDetail_max)return!1;if(void 0==i)window.location.href="logon.html";else{var o={mobile:i,startPage:s};xigou.activeUser.receiveCenterlist({requestBody:o,callback:function(s,o){if(o==xigou.dictionary.success)if(null==s)$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"});else switch(s.code){case"0":setHtmlView(s,i);break;case"-100":var t=$.dialog({title:"",content:s.msg||"用户失效，请重新登录。",button:["确认"]});t.on("dialog:action",function(i){console.log(i.index),xigou.removelocalStorage("token"),window.location.href="logon.html"});break;default:$.tips({content:s.msg||"获取优惠券信息失败",stayTime:2e3,type:"warn"}),e.lock(),$(".dropload-down").hide()}else $.tips({content:"请求失败，详见"+s,stayTime:2e3,type:"warn"}),e.lock(),$(".dropload-down").hide()}})}}function setHtmlView(i,s){var e=i.data;if(e.list&&"[]"!=e.list)for(var o=0;o<e.list.length;o++){var t=e.list[o],a=t.operate;"1"==a?ImmediatelyReceive(t,s):"2"==a?ImmediatelyUse(t):"3"==a&&LootAll(t)}else Nothing()}function ImmediatelyReceive(i,s){var e=i.price,o=i.couponImagePath,t=i.name,a=i.needOverMon,n=i.couponcode,l=[];l.push('<div class="coils_receive_list">'),l.push('   <div class="kinds coils_receive_kinds">'),l.push('       <div class="price"><span style="font-size:12px;padding-right: 3px;">¥</span>'+e+"</div>"),l.push('       <div class="types">优惠券</div>'),l.push('   	  <a class="now receive_now" onclick=receiveCoupon("'+n+'","'+s+'")>立即领取</a>'),l.push("   </div>"),l.push('   <div class="list_img box-shadow"><img src="'+o+'"/></div>'),l.push('   <div class="list_name">'+t+"</div>"),l.push('   <div class="line"></div>'),"0"!=a&&l.push('   <div class="list_condition">满'+a+"可用</div>"),l.push('   <img class="redTop" src="img/coilArea/red_top.png"/>'),l.push('   <img class="redBottom" src="img/coilArea/red_bottom.png"/>'),l.push("</div>"),$(".coils").append(l.join(""))}function ImmediatelyUse(i){var s=i.price,e=i.couponImagePath,o=i.name,t=i.needOverMon,a=i.couponUserId,n=[];n.push('<div class="coils_use_list">'),n.push('   <div class="kinds coils_use_kinds">'),n.push('       <div class="price"><span style="font-size:12px;padding-right: 3px;">¥</span>'+s+"</div>"),n.push('       <div class="types">优惠券</div>'),n.push('   	  <a class="now use_now" href="search.html?couponid='+a+'">去使用</a>'),n.push("   </div>"),n.push('   <div class="list_img box-shadow"><img src="'+e+'"/></div>'),n.push('   <div class="list_name">'+o+"</div>"),n.push('   <div class="line"></div>'),n.push('   <div class="list_status"></div>'),"0"!=t&&n.push('   <div class="list_condition">满'+t+"可用</div>"),n.push('   <img class="blueTop" src="img/coilArea/blue_top.png"/>'),n.push('   <img class="blueBottom" src="img/coilArea/blue_bottom.png"/>'),n.push("</div>"),$(".coils").append(n.join(""))}function LootAll(i){var s=i.price,e=i.couponImagePath,o=i.name,t=i.needOverMon,a=[];a.push('<div class="coils_expire_list">'),a.push('   <div class="kinds coils_expire_kinds">'),a.push('       <div class="price"><span style="font-size:12px;padding-right: 3px;">¥</span>'+s+"</div>"),a.push('       <div class="types">优惠券</div>'),a.push('   	  <a class="expire_now">已抢光</a>'),a.push("   </div>"),a.push('   <div class="list_img box-shadow"><img src="'+e+'"/></div>'),a.push('   <div class="list_name">'+o+"</div>"),a.push('   <div class="line"></div>'),"0"!=t&&a.push('   <div class="list_condition">满'+t+"可用</div>"),a.push('   <img class="grayTop" src="img/coilArea/gray_top.png"/>'),a.push('   <img class="grayBottom" src="img/coilArea/gray_bottom.png"/>'),a.push("</div>"),$(".coils").append(a.join(""))}function receiveCoupon(i,s){var e={ccode:i,tel:s};xigou.activeUser.receiveCoupon({requestBody:e,callback:function(i,s){if(s==xigou.dictionary.success)if(null==i)$.tips({content:xigou.dictionary.chineseTips.server.value_is_null,stayTime:2e3,type:"warn"});else switch(i.code){case"0":window.location.reload();break;case"-100":alert(2);var e=$.dialog({title:"",content:i.msg||"用户失效，请重新登录。",button:["确认"]});e.on("dialog:action",function(){xigou.removelocalStorage("token"),window.location.href="logon.html"});break;default:alert(3),$.tips({content:i.msg||"获取优惠券信息失败",stayTime:2e3,type:"warn"})}else $.tips({content:"请求失败，详见"+i,stayTime:2e3,type:"warn"})}})}var page=1;$(function(){isWeiXin()&&($("header").hide(),$("title").html("领取专区"),$(".coils").css({"margin-top":"15px"}),$(".coils").css({"margin-bottom":"87px"}),$(".coupon_wx").show())}),$(function(){xigou.getLoginUserInfo({callback:function(i,s){if(s==xigou.dictionary.success){var e=i.telephone;$(".coils").dropload({scrollArea:window,loadDownFn:function(i){receiveCenterlist(e,page,i),i.resetload(),1==page&&$(".dropload-down").hide(),page++}})}else window.location.href="logon.html"}})});var getWithdrawDetail_max="N";